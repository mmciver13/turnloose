<!-- /templates/article.liquidd -->

{% assign number_of_comments = article.comments_count %}

{% comment %}
  If a comment was just submitted and it has no blank fields, we have an extra comment to count.
{% endcomment %}
{% if comment and comment.created_at %}
  {% assign number_of_comments = article.comments_count | plus: 1 %}
{% endif %}

<article itemscope itemtype="http://schema.org/Article">
  <header class="row row-fullwidth tl-hero fadein-1" style="background-image:url('{{ article.image | img_url: '2048x2048' }}');background-repeat:no-repeat;background-size:cover;background-position:center center;">
    <div class="tl-hero-cover">
    </div>
    <div class="tl-down-arrow">
      <img src="{{ 'down-arrow.svg' | asset_url }}" />
    </div>
    <div class="row">
      <div class="col-full content">
        <span class="tl-hero-subhead fadein-2">
          <time datetime="{{ article.published_at | date: '%Y-%m-%d' }}">{{ article.published_at | date: format: 'month_day_year' }}</time>
        </span>
        <h1 class="fadein-3">
          {{ article.title }}
        </h1>
        <span class="tl-hero-subhead fadein-2">
          {{ article.author }}
        </span>
      </div>
    </div>
  </header>

  <!-- the article itself -->
  <div class="row tl-article" itemprop="articleBody">
    {{ article.content }}
  </div>
  <!-- /the article itself -->

  <!-- pagination (for now) -->
  <div class="row row-tl-bump">
    {% if blog.next_article or blog.previous_article %}
      {% if blog.previous_article %}
        <div class="sm-col-half">
          <a href="{{ blog.previous_article }}" class="btn btn--secondary btn--small uppercase">
            &larr; {{ 'blogs.article.older_post' | t }}
          </a>
        </div>
      {% endif %}
      {% if blog.next_article %}
        <div class="sm-col-half" style="text-align:right;">
          <a href="{{ blog.next_article }}" class="btn btn--secondary btn--small uppercase">
            {{ 'blogs.article.newer_post' | t }} &rarr;
          </a>
        </div>
      {% endif %}
    {% endif %}
  </div>
  <!-- /pagination (for now) -->

</article>

<div class="row row-fullwidth tl-hero-featured-row">
  <a href="{{ collections[settings.featured_small_1_link].url }}">
    <div class="col-third tl-box-container">
      <div class="tl-collection-box fadein-1" style="background-image:url('{{ settings.featured_small_1_img | img_url: '1024x1024' | format: 'jpg' }}');background-repeat:no-repeat;background-size:cover;background-position:center center;">
        <div class="tl-box-cover">
        </div>
        <h1 class="tl-box-name">
           {{ settings.featured_small_1_title }}
        </h1>
      </div>
    </div>
  </a>
  <a href="{{ collections[settings.featured_small_2_link].url }}">
    <div class="col-third tl-box-container">
      <div class="tl-collection-box fadein-1" style="background-image:url('{{ settings.featured_small_2_img | img_url: '1024x1024' | format: 'jpg' }}');background-repeat:no-repeat;background-size:cover;background-position:center center;">
        <div class="tl-box-cover">
        </div>
        <h1 class="tl-box-name">
           {{ settings.featured_small_2_title }}
        </h1>
      </div>
    </div>
  </a>
  <a href="{{ collections[settings.featured_small_3_link].url }}">
    <div class="col-third tl-box-container">
      <div class="tl-collection-box fadein-1" style="background-image:url('{{ settings.featured_small_3_img | img_url: '1024x1024' | format: 'jpg' }}');background-repeat:no-repeat;background-size:cover;background-position:center center;">
        <div class="tl-box-cover">
        </div>
        <h1 class="tl-box-name">
           {{ settings.featured_small_3_title }}
        </h1>
      </div>
    </div>
  </a>
  <a href="{{ settings.featured_1_link }}">
    <div class="col-half tl-box-container">
      <div class="tl-collection-box fadein-2" style="background-image:url('{{ settings.featured_1_img | img_url: '1024x1024' | format: 'jpg' }}');background-repeat:no-repeat;background-size:cover;background-position:center center;">
        <div class="tl-box-cover">
        </div>
        <h1 class="tl-box-name">
          {{ settings.featured_1_title }}
        </h1>
      </div>
    </div>
  </a>
  <a href="{{ settings.featured_2_link }}">
    <div class="col-half tl-box-container">
      <div class="tl-collection-box fadein-3" style="background-image:url('{{ settings.featured_2_img | img_url: '1024x1024' | format: 'jpg' }}');background-repeat:no-repeat;background-size:cover;background-position:center center;">
        <div class="tl-box-cover">
        </div>
        <h1 class="tl-box-name">
          {{ settings.featured_2_title }}
        </h1>
      </div>
    </div>
  </a>
</div>

<div class="row row-fullwidth row-tl-bump-2x tl-promotion" style="background-image:url('{{ settings.featured_promotion_img | img_url: '1024x1024' | format: 'jpg' }}');background-repeat:no-repeat;background-size:cover;background-position:center center;position:relative;">
  <div class="tl-promo-overlay" style="background-color:{{ settings.featured_promotion_color }};">
  </div>
  <div class="content col-full text-center tl-promotion">
    <h4>
      {{ settings.featured_promotion }}
    </h4>
    <a href="{{ settings.featured_promotion_url }}" class="tl-btn tl-btn-white-outline">
      {{settings.featured_promotion_button}}
    </a>
  </div>
</div>

<!-- todo:subscribe form -->
<!-- todo:social media -->
